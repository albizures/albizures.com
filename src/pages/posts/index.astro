---
import { SITE } from '../../config';
import Posts from '../../layouts/Posts.astro';
import getPageNumbers from '../../utils/getPageNumbers';

import { getCollection } from 'astro:content';
import { sortCollection } from '../../utils/collections';

const posts = await getCollection('blog');

const sortedPosts = sortCollection(posts);

const totalPages = getPageNumbers(sortedPosts.length);

const paginatedPosts = sortedPosts.slice(0, SITE.postPerPage);
---

<Posts posts={paginatedPosts} pageNum={1} totalPages={totalPages.length} />
